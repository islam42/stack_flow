<% if @comment.commentable_type == 'Question' %>
  <% if flash[:update_comment_error].nil? %>
    $('#comment-item<%= @comment.id %>')
      .replaceWith("<%= j render @comment %>");
    $('#question-comment-error').empty();
    $("#question-comment-area").val("");
    $("#question_comment_form").hide();
    $('#question_comment').show();
    $('#post-comment').val('Post comment');
    $('#new_comment')
      .attr("action", "/questions/<%= @comment.commentable_id %>/comments/");
    $('#new_comment').attr("method", "POST");
  <% else %>
    $('#question-comment-error').empty();
    $('#question-comment-error')
      .append("<%= j render 'shared/error_messages', object: @comment %>");
    <% flash[:update_comment_error] = nil %>
  <% end %>
<% elsif @comment.commentable_type == 'Answer' %>
  <% if flash[:update_comment_error].nil? %>
    $('#comment-item<%= @comment.id %>')
      .replaceWith("<%= j render @comment %>");
    $('#answer-comment-error<%= @comment.commentable_id %>').empty();
    $("#answer-comment-area<%= @comment.commentable_id %>").val("");
    $("#answer_comment_form<%= @comment.commentable_id %>").hide();
    $('#answer-add-comment<%= @comment.commentable_id %>').show();
    $('#post-comment<%= @comment.commentable_id %>').val('Post comment');
    $('#answer_comment_form<%= @comment.commentable_id %>').find('form')
      .attr("action", "/answers/<%= @comment.commentable_id %>/comments/");
    $('#answer_comment_form<%= @comment.commentable_id %>').find('form')
      .attr("method", "POST");
  <% else %>
    $('#answer-comment-error<%= @comment.commentable_id %>').empty();
    $('#answer-comment-error<%= @comment.commentable_id %>')
      .append("<%= j render 'shared/error_messages', object: @comment %>");
    <% flash[:update_comment_error] = nil %>
  <% end %>
<% end %>